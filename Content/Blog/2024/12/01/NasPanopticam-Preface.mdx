---
title: "NasPanoptiCam - Preface"
date: 2024-12-01
description: "Nas is the best... cam?? An introduction to my omniscient NasPanoptiCam project!"
tags: [NasPanoptiCam]
authors: "Natalie"
---

I'm not sure when or where the idea came from, but I've been playing with the idea of constantly recording the players in a Minecraft world for a long time. There are theoretically dozens of ways to do this, getting more complicated when I also require no modification on the client.   
{/* truncate */}I've played with a few tools used to create ReplayMod files from the server, as well as dozens of ways to record and replay packets sent to/from the client. Unfortunately they all tend to be unstable the longer you're recording and/or come with downsides like complex post-processing or the inability to generate a "live" view.  
So in early 2024 I landed on just *recording a game client* and controlling the position of the player using a server-side plugin. There are of course down sides to this as well, but before we get to that it's important to cover exactly what I **want** this to accomplish so that we can put the downsides into perspective. 

## Project Goals 

As with any project, knowing what you want it to do is the best place to start. From there you can find the solutions that fit your *wants* with minimal compromises. NasPanoptiCam at it's simplest is just recording players as they play on the server, but there's a lot of nuance and *extra features* that are important to keep in mind.  
Below is a list of features sorted by priority. Not all of them have been implemented as of writing, and the ones that have will be checked off as I go.  

 - [X] 24/7 Live Stream 
 - [ ] Stability 
   - [X] Consistent game FPS 
   - [X] No dropped streaming frames 
   - [X] Reasonable post-processing times 
   - [ ] Ability to re-launch the game client as needed 
   - [ ] Auto-relog for game client 
   - [ ] Auto-auth for game client 
 - [X] Following Players/Locations 
   - [X] Follows me when I'm online 
   - [X] Follows other online players when I'm not online 
   - [X] Monitors configured locations when no players are online 
     - [ ] Multiple "idle location" types. 
       - [X] Circle 
       - [ ] Path 
       - [ ] Watch 
 - [X] 24/7 Recording 
 - [ ] Automatic recording processing/upload 
   - [X] Automatic splitting of recording based on who was being followed 
   - [ ] Automatic upload of segmented and then combined recordings for each player every day 
   - [ ] Automatic generation of a  monthly timelapse for each player 
   - [X] MKV Chapter marking for the full unsegmented recording and for daily/monthly combined recordings 
 - [X] Allow players to opt out of being followed 
 - [X] In-game display/notification of who's being followed 
 - [ ] Display the livestream chat in the Minecraft server chat 

The following feature are my "daydreams" that have no guarantee of ever being implemented or even useful. They're just more of the thousands of things I keep as possible projects in my mind.  

 - Using the recordings as a source for a website background 
 - A URL that always directs to the current NasPanoptiCam stream 
   - Some method of updating a redirect to the current stream using the YouTube API. 
 - A non-YouTube stream that can be viewed in a browser or VLC 
   - Could be cool to have as a screen saver. 
   - Would probably need to multi stream from OBS, or have a separate process that just streams the same thing to a YouTube live stream. 
 - A public S3 bucket and web display that lists all of the media generated by NasPanoptiCam 
   - S3 by default can't be viewed from a browser, so it'd be cool to have the media listed in a gallery of sorts. 
 - Multiple active cameras for maximum observance 
   - It might be possible to somehow modify the server and client to switch the camera between multiple locations fast enough that I can de-multiplex the stream into separate videos in a similar way to how an analogue CTTV camera sending multiple cameras over the same wire. 
 - A way to do record without an active client connected to the server. 
   - Maybe some kind of server-side mod/plugin that emulates the packets from an actual player and sends them to one of the many projects recreating Minecraft. 


## The Name 

Shortly after starting this project, I ran across a video about the Panopticon which is a whole subject on it's own but can be simplified here as an example of constant surveillance. There's a lot more nuance to it, but I don't want to get to far into the weeds just for the *name* of this project. It's not even the reason I started the project, but it fits so well into the idea that I had to co-opt the name.  
[Wikipedia](https://en.wikipedia.org/wiki/Panopticon) is *probably* a good place to start if you're interested in more.  
  
The "cam" \(Panopti**Cam** instead of Panopti**con**\) part comes from a related \(and more modern\) project by UCL that I found really cool. They put a camera with Jeremy Bentham's *skeleton* \(The philosopher who thought of the Panopticon\), which he had preserved and placed into one of the halls at UCL. They then streamed and timelapsed the footage exactly how I'm wanting to do.  
The stream isn't running anymore, but [the project page](https://blogs.ucl.ac.uk/panopticam/) is still up on UCL's website. 
  
Of course the **Nas** is just my name, I had to add my own flair to it after all. 
<center>**Nas**pen's **Panopti**con **Cam**era</center>
<center>Nas - Panopti - Cam</center>
<center>NasPanoptiCam</center>

## Progress so far 

I have it *mostly* working at this point, which only the final parts of the automatic post-processing and live stream chat to sort out. There are a couple of extra features I want to add to the plugin, mostly surrounding the idle locations feature like making them easier to define and providing more options.  

The biggest issue I ran into is the hardware I was using died on me back in June. It's *annoyingly* intensive to stream, record, and run a game client *without a gpu* and I was getting massive heat problems from day 1. I think I managed to cook my hardware despite running it open case with a secondary fan. I don't really know what part died and I haven't had the money/time to get potential replacement parts. All I know so far is that it just didn't turn back on after I turned it off and that it's not a PSU issue \(external PSU FTW??\).   
I've since setup a VPS at WinterNode and have been able to get things mostly back to where I had them. Using a VPS entirely eliminates the cooling issue and adds stability to the network connection. I'm also trying to design the scripts and game client I use in such a way that I can just drop them into another Ubuntu Desktop environment and expect it to work, with the *dream* of having multiple "NasPanoptiCam Nodes" that I can easily deploy as needed.  
<sub>It might be better to switch to a more minimal OS that can also run Minecraft so that the hardware is less expensive. Even just separating the client from the server doing the recording and public streaming would reduce the hardware load/cost substantially. The idea being to just have one central "recording server" which can see the other server's screens.</sub>

The plugin that manages the camera account is published on [GitHub](https://github.com/theNaspenGrove/NasPanoptiCam) and is mostly done. It's not as robust as I'd like, but it's stable and gets the job done. There's a lot of polishing to do with it, but I'm fairly happy with making the whole project live in it's current state.  

## Long Term Plans 

I haven't \(intentionally\) started the public NasPanoptiCam stream just yet, and that's largely because the game client itself is still presenting some problems.  
I've had continuous issues with authentication. It expires relatively quickly and prevents the game client from re-joining the server as needed. There are a ton of re-authentication mods, but I haven't found any modern ones that can re-authenticate you without user input and/or as part of the server join process.  
<sub>This should be possible with the mod I'm using now if I made a custom mod using it's API. *I just don't know how to write Fabric mods :'\(*</sub>

Mojang also implemented an FPS limiter feature that limits the FPS to 10 when you're afk or the game client is in the background. Because of the way I'm streaming the game, it's always considered "in the background" so I'm stuck at 10fps. It's not that bad since I'll be making timelapses out of the footage, but it's something I want to fix for the stream.  

I really feel like having the YouTube Stream chat show up in the game server chat is really important, but I keep getting lost in the weeds of the YouTube/Google API. I don't want people who pop into livestream to *not be seen* when they talk, and most players probably aren't going to keep the stream that's watching them open to respond to chat.  

For right now I need to finish setting up the post-processing scripts, which I'll be publishing to another Git Repo soon. I plan on going over all of the neat tricks I've been able to learn in a few other blog posts, like the things I did to get stable FPS while recording and streaming and the ways I'm processing the recordings.  